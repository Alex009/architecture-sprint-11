# Проблемные места текущей архитектуры

Проблемы с точки зрения бизнеса:
1. Сейчас нужную отчётность сложно построить за разумное время: очень много данных (сотни терабайт) и вариантов их использования. Это порождает большое количество трансформаций, что в свою очередь замедляет time-to-market и приводит к снижению производительности. В итоге сложные отчёты можно ждать часами.
2. В DWH лежит лишнее:
    - что мы имеем - "Медицинские карты и истории болезни, в том числе — данные исследований, выполненных в ходе лечения."
    - а по бизнес задаче указано - "Обратите внимание: в витрину данных не нужно добавлять медицинские карты, истории болезней и результаты медицинских исследований. Эти данные компания не будет использовать для аналитики."

Проблемы с технической стороны:
1. Data Warehouse сейчас является монолитным (не разделенным на домены), а значит ответственность за его работу целиком на команде данных, которая становится узким местом при добавлении еще больше бизнесов.
2. Логика обработки находится в самом DWH. Так как DWH на базе MS SQL 2008, то видимо вся логика описана в виде хранимых процедур и производится обработка данных внутри бд. Скорее всего происходит так: 
   - интеграционная шина (Apache Camel) используется только для загрузки данных - из бизнес сервисов в DWH. 
   - обработка данных происходит уже внутри DWH (указано что "Его построили на базе SQL-сервера с большим количеством бизнес-логики") - скорее всего в виде хранимых процедур.
   - то есть видимо подход - ELT (выгрузка, загрузка и только потом трансформация)
   - обработка данных внутри DWH повышает нагрузку на него, что может быть одной из причин проблемы "При этом уже сейчас нужную отчётность сложно построить за разумное время: очень много данных (сотни терабайт) и вариантов их использования. Это порождает большое количество трансформаций, что в свою очередь замедляет time-to-market и приводит к снижению производительности. В итоге сложные отчёты можно ждать часами."
3. Microsoft SQL-сервер 2008 года не оптимизирован под те объемы, которые уже набрались, а также имеет скудные возможности к горизонтальному масштабированию, что также накладывает значительные ограничения на производительность.
4. Из описания "Исторически все данные в компании «Будущее 2.0» лежали в DWH. Его построили на базе SQL-сервера с большим количеством бизнес-логики и интерфейсом на Power Builder для прямой работы операторов в клиниках." можно сделать вывод что медицинская часть бизнеса плотно завязана на базе данных, которая является и DWH. 
    - "Интерфейс на Power Builder" означает что в клиниках операторы напрямую подключены к базе данных, которая внутри себя содержит бизнес логику.
    - Получается что у нас смешано хранилище данных для аналитики и core-система для медицинской части бизнеса.

# Приоритезация проблем


